<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>후보키(카카오 코딩테스트 2018)</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/style.css">
  <link rel="canonical" href="http://localhost:4000/codingtest/0201/01/01/candidate_key.html">
  <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="http://localhost:4000/feed.xml">

  	<!-- 폰트 및 코드 하이라이팅 -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/androidstudio.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
</head>


  <body>

    <div class='wrapper'>

    <!--<input data-function='swipe' id='swipe' type='checkbox'>-->
    <!--<label data-function='swipe' for='swipe' class="btn btn-default" >Menu</label>-->


    <!--<div class='sidebar menu'>-->
    <div id="test">


        <div class="menu">

            <div class="navigation">
                <ul>
                    

                    
                    
                    
                    
                    <li><a href="/">Home</a></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>


            <hr>

            <div class="navigation">
                <ul>
                    
                    <li>
                        <a href="/categories/Python">Python</a></li>
                    
                    <li>
                        <a href="/categories/Etc">Etc</a></li>
                    
                    <li>
                        <a href="/categories/CodingTest">CodingTest</a></li>
                    
                    <li>
                        <a href="/categories/AWS">AWS</a></li>
                    
                    <li>
                        <a href="/categories/Django">Django</a></li>
                    
                    <li>
                        <a href="/categories/DataStructure">DataStructure</a></li>
                    
                </ul>
            </div>

            <hr>

            <!--<div id="picture" style="background-image: url(http://www.naturaloil.ph/wp-content/uploads/2015/11/John_Doe.jpg)"></div>-->
            <p>One sentence introducing yourself or what you do</p>

            <hr>


            <div id="social-icons">
                <ul>
                    <!--<li><a href="http://facebook.com/username"><i class="fa fa-facebook"></i></a></li>-->
                    <!--<li><a href="https://mx.linkedin.com/in/username"><i class="fa fa-linkedin"></i></a></li>-->
                    <li><a href="http://github.com/username"><i class="fa fa-github"></i></a></li>
                    <!--<li><a href="http://username.deviantart.com"><i class="fa fa-deviantart"></i></a></li>-->
                    <!--<li><a href="http://codepen.io/username"><i class="fa fa-codepen"></i></a></li>-->
                </ul>
            </div>

            <hr>

            <!--<p>© Taken theme<p>-->
            <!--<p>Powered by Jekyll<p>-->

        </div>
    </div>

    <div class='content'>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
     <h2 class="post-title">후보키(카카오 코딩테스트 2018)</h2>
     <p class="post-meta"><time datetime="0201-01-01T00:01:44+08:27" itemprop="datePublished">Jan 1, 0201</time></p>
      <hr>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h4 id="문제-설명">문제 설명</h4>

<p>프렌즈대학교 컴퓨터공학과 조교인 제이지는 네오 학과장님의 지시로, 학생들의 인적사항을 정리하는 업무를 담당하게 되었다.</p>

<p>그의 학부 시절 프로그래밍 경험을 되살려, 모든 인적사항을 데이터베이스에 넣기로 하였고, 이를 위해 정리를 하던 중에 후보키(Candidate Key)에 대한 고민이 필요하게 되었다.</p>

<p>후보키에 대한 내용이 잘 기억나지 않던 제이지는, 정확한 내용을 파악하기 위해 데이터베이스 관련 서적을 확인하여 아래와 같은 내용을 확인하였다.</p>

<ul>
  <li>관계 데이터베이스에서 릴레이션(Relation)의 튜플(Tuple)을 유일하게 식별할 수 있는 속성(Attribute) 또는 속성의 집합 중, 다음 두 성질을 만족하는 것을 후보 키(Candidate Key)라고 한다.
    <ul>
      <li>유일성(uniqueness) : 릴레이션에 있는 모든 튜플에 대해 유일하게 식별되어야 한다.</li>
      <li>최소성(minimality) : 유일성을 가진 키를 구성하는 속성(Attribute) 중 하나라도 제외하는 경우 유일성이 깨지는 것을 의미한다. 즉, 릴레이션의 모든 튜플을 유일하게 식별하는 데 꼭 필요한 속성들로만 구성되어야 한다.</li>
    </ul>
  </li>
</ul>

<p>제이지를 위해, 아래와 같은 학생들의 인적사항이 주어졌을 때, 후보 키의 최대 개수를 구하라.</p>

<p><img src="https://grepp-programmers.s3.amazonaws.com/files/production/f1a3a40ede/005eb91e-58e5-4109-9567-deb5e94462e3.jpg" alt="cand_key1.png" /></p>

<p>위의 예를 설명하면, 학생의 인적사항 릴레이션에서 모든 학생은 각자 유일한 학번을 가지고 있다. 따라서 학번은 릴레이션의 후보 키가 될 수 있다.<br />
그다음 이름에 대해서는 같은 이름(apeach)을 사용하는 학생이 있기 때문에, 이름은 후보 키가 될 수 없다. 그러나, 만약 [이름, 전공]을 함께 사용한다면 릴레이션의 모든 튜플을 유일하게 식별 가능하므로 후보 키가 될 수 있게 된다.<br />
물론 [이름, 전공, 학년]을 함께 사용해도 릴레이션의 모든 튜플을 유일하게 식별할 수 있지만, 최소성을 만족하지 못하기 때문에 후보 키가 될 수 없다.<br />
따라서, 위의 학생 인적사항의 후보키는 학번, [이름, 전공] 두 개가 된다.</p>

<p>릴레이션을 나타내는 문자열 배열 relation이 매개변수로 주어질 때, 이 릴레이션에서 후보 키의 개수를 return 하도록 solution 함수를 완성하라.</p>

<h4 id="제한사항">제한사항</h4>

<ul>
  <li>relation은 2차원 문자열 배열이다.</li>
  <li>relation의 컬럼(column)의 길이는 <code class="highlighter-rouge">1</code> 이상 <code class="highlighter-rouge">8</code>이하이며, 각각의 컬럼은 릴레이션의 속성을 나타낸다.</li>
  <li>relation의 로우(row)의 길이는 <code class="highlighter-rouge">1</code> 이상 <code class="highlighter-rouge">20</code>이하이며, 각각의 로우는 릴레이션의 튜플을 나타낸다.</li>
  <li>relation의 모든 문자열의 길이는 <code class="highlighter-rouge">1</code> 이상 <code class="highlighter-rouge">8</code>이하이며, 알파벳 소문자와 숫자로만 이루어져 있다.</li>
  <li>relation의 모든 튜플은 유일하게 식별 가능하다.(즉, 중복되는 튜플은 없다.)</li>
</ul>

<h4 id="입출력-예">입출력 예</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">relation</th>
      <th style="text-align: left">result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">[["100","ryan","music","2"],["200","apeach","math","2"],["300","tube","computer","3"],["400","con","computer","4"],["500","muzi","music","3"],["600","apeach","music","2"]]</code></td>
      <td style="text-align: left">2</td>
    </tr>
  </tbody>
</table>

<h4 id="입출력-예-설명">입출력 예 설명</h4>

<p>입출력 예 #1<br />
문제에 주어진 릴레이션과 같으며, 후보 키는 2개이다.</p>

<hr />

<h3 id="다른사람-코드풀지-못함">다른사람 코드(풀지 못함)</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from itertools import combinations

def solution(relation):
    n_col = len(relation[0])

    # 컬럼의 조합 경우의 수를 구해서 리스트에 담아준다
    candidates = []
    for i in range(1, len(n_col + 1):
        combination_i = combinations(range(n_col), i)
        candidates.extend(combination_i)
        # append 를 사용하게 될 경우 itertool 함수가 list 에 추가 된다. 
        # append 는 object 를 추가하는 것이고 extend 는 iterable object 의 element 를 추가하는 것이다. *중요

    # 위에서 구한 후보키 조합으로 &lt;1&gt; 데이터를 매칭 시킨 뒤, &lt;2&gt; 중복이 존재하지 않는 데이터 후보키를 final 에 넣어준다 
    n_row = len(relation)
    final = []
    for keys in candidates:
        tmp = []
        for item in relation:
            a = []
            for key in keys:
                a.append(item[key])
            tmp.append(tuple(a))  # &lt;1&gt;
    # for keys in candidates:
    #     tmp = [tuple(item[key] for key in keys) for item in relation]

        if len(set(tmp)) == n_row:
            final.append(keys)  # &lt;2&gt;

    # final 에 최소성을 만족시키기 위해 중복된 key 가 들어간 애들을 제거해준다.
    answer = set(final)  # why set()? discard() 를 사용하려고
    for i in range(len(final)):
        for j in range(i + 1, len(final)):
            if set(final[i]) == set(final[i]).intersection(set(final[j])):
                answer.discard(final[j])

    return len(answer)



</code></pre></div></div>

<p>일단 풀이를 보고 따라서 하나씩 진행해보긴 했지만 다시 풀라고 못 풀거 같은 문제다.</p>

<p>문제를 풀이하기 위해선 combinations 와 set 을 자유자재로 다룰 수 있어야 한다. <code class="highlighter-rouge">combination(range(5), 3)</code> 이라면, 0부터 4까지의 숫자 중 3개를 뽑아 만들 수 있는 조합을 생성한다. set 은 교집합이나 합집합, 차집합 등을 지원한다.</p>

<p>전체적인 문제 풀이 방식을 살펴보면,</p>

<ol>
  <li>
    <p>컬럼의 갯수로 조합할 수 있는 모든 집합을 구한다.(candidates)</p>

    <ul>
      <li>extend 와 append 의 차이점은 iterable object 를 다루기 위해 꼭 필요하다</li>
    </ul>
  </li>
  <li>
    <p>구한 candidates 의 key 에 데이터 값을 대입한 후, 중복된 데이터를 제거한다.</p>

    <ul>
      <li>
        <p>key 값에 데이터를 대입하는 방식이 꽤나 까다롭다. list comprehension 으로 작성하면,</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  for keys in candidates:
      tmp = [tuple(item[key] for key in keys) for item in relation]
</code></pre></div>        </div>

        <p>다음과 같이 굉장히 간단하지만 풀어서 작성하려면 꽤나 어렵다. 연습을 많이 해봐야한다.</p>
      </li>
      <li>
        <p>set 을 이용해 중복된 항목 제거</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # tmp, set(tmp) 를 비교한 출력
  -----keys =  (0,) 
        
  [('100',), ('200',), ('300',), ('400',), ('500',), ('600',)]
        
  {('600',), ('100',), ('500',), ('300',), ('400',), ('200',)} 데이터 중복 제거 후 
        
  -----keys =  (1,) 
        
  [('ryan',), ('apeach',), ('tube',), ('con',), ('muzi',), ('apeach',)]
        
  {('muzi',), ('con',), ('tube',), ('apeach',), ('ryan',)} 데이터 중복 제거 후 
        
  -----keys =  (2,) 
        
  [('music',), ('math',), ('computer',), ('computer',), ('music',), ('music',)]
        
  {('computer',), ('math',), ('music',)} 데이터 중복 제거 후 
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>이 때 문제의 조건인 최소성을 만족시키기 위해 중복된 키가 들어간 경우를 또다시 제거해줘야한다.</p>

    <ul>
      <li><code class="highlighter-rouge">[(0,), (0, 1), (0, 2), (0, 3), (1, 2), (0, 1, 2), (0, 1, 3), (0, 2, 3), (1, 2, 3), (0, 1, 2, 3)]</code> 의 형태에서 최소성을 만족시키면 <code class="highlighter-rouge">{(0,), (1, 2)}</code> 가 된다.</li>
      <li>remove(a) 를 사용하면 a 가 없을 경우 에러가 나서 set() 의 discard(a) 를 사용한다.(인덱스와 .get() 의 차이와 유사)</li>
    </ul>
  </li>
</ol>

<h3 id="다른사람-코드-2">다른사람 코드 2</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def solution(relation):
    answer_list = list()
    for i in range(1, 1 &lt;&lt; len(relation[0])):  # 2^n-1(조합의 갯수)연산을 비트연산자로 실행함
        tmp_set = set()
        for j in range(len(relation)):
            tmp = ''
            for k in range(len(relation[0])):
                if i &amp; (1 &lt;&lt; k):
                    tmp += str(relation[j][k])
            tmp_set.add(tmp)  # 여기엔 문자열을 이어붙인 각 record 값이 들어오게됨

        if len(tmp_set) == len(relation):
            not_duplicate = True
            for num in answer_list:
                if (num &amp; i) == num:
                    not_duplicate = False
                    break
            if not_duplicate:
                answer_list.append(i)
    return len(answer_list)
</code></pre></div></div>

<p>비트 연산자를 통해 푼 코드인데 사실 잘 모르겠다 계속 변수 확인과 이래저래 알아보려고했지만 제대로 이해가 가 않는다. 나중에 다시 보기위해 남긴다.</p>

  </div>

  <!-- To enable Disqus comments, comment out this code and insert your Disqus shortname -->

  <!--  -->

</article>

    </div>
</div>

      
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-2.x-git.min.js"></script>
      
    <!-- Bootstrap Core JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="/js/index.js"></script>

  </body>

    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

    <script>
    $(document).ready(function(){
    $('#page-content-wrapper').fadeIn();
    });
    </script>

</html>
