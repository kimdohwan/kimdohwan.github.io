<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>5. Search Tree - Avl Tree</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/style.css">
  <link rel="canonical" href="http://localhost:4000/datastructure/2018/11/25/avl_tree.html">
  <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="http://localhost:4000/feed.xml">

  	<!-- 폰트 및 코드 하이라이팅 -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/androidstudio.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
</head>


  <body>

    <div class='wrapper'>

    <!--<input data-function='swipe' id='swipe' type='checkbox'>-->
    <!--<label data-function='swipe' for='swipe' class="btn btn-default" >Menu</label>-->


    <!--<div class='sidebar menu'>-->
    <div id="test">


        <div class="menu">

            <div class="navigation">
                <ul>
                    

                    
                    
                    
                    
                    <li><a href="/">Home</a></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>


            <hr>

            <div class="navigation">
                <ul>
                    
                    <li>
                        <a href="/categories/Python">Python</a></li>
                    
                    <li>
                        <a href="/categories/Etc">Etc</a></li>
                    
                    <li>
                        <a href="/categories/CodingTest">CodingTest</a></li>
                    
                    <li>
                        <a href="/categories/AWS">AWS</a></li>
                    
                    <li>
                        <a href="/categories/Django">Django</a></li>
                    
                    <li>
                        <a href="/categories/DataStructure">DataStructure</a></li>
                    
                </ul>
            </div>

            <hr>

            <!--<div id="picture" style="background-image: url(http://www.naturaloil.ph/wp-content/uploads/2015/11/John_Doe.jpg)"></div>-->
            <p>One sentence introducing yourself or what you do</p>

            <hr>


            <div id="social-icons">
                <ul>
                    <!--<li><a href="http://facebook.com/username"><i class="fa fa-facebook"></i></a></li>-->
                    <!--<li><a href="https://mx.linkedin.com/in/username"><i class="fa fa-linkedin"></i></a></li>-->
                    <li><a href="http://github.com/username"><i class="fa fa-github"></i></a></li>
                    <!--<li><a href="http://username.deviantart.com"><i class="fa fa-deviantart"></i></a></li>-->
                    <!--<li><a href="http://codepen.io/username"><i class="fa fa-codepen"></i></a></li>-->
                </ul>
            </div>

            <hr>

            <!--<p>© Taken theme<p>-->
            <!--<p>Powered by Jekyll<p>-->

        </div>
    </div>

    <div class='content'>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
     <h2 class="post-title">5. Search Tree - Avl Tree</h2>
     <p class="post-meta"><time datetime="2018-11-25T00:00:00+09:00" itemprop="datePublished">Nov 25, 2018</time></p>
      <hr>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>특정 노드의 서브트리(left, right)의 높이차이가 2 이상일 경우,<br />
rotate_left or right 를 통해 height balance 를 해결한다.</p>

<ul>
  <li>
    <p>개념<br />
left sub tree 의 높이가 큰 경우(달린 애들이 많다는 말), rotate_right<br />
right sub tree 의 높이가 큰 경우, rotate_ left<br />
LL rotation : 특정 노드의 left 의 left height 가 불균형인경우(rotate_right)<br />
RR rotation : LL 과 반대<br />
LR, RL rotation: 특정노드의 &lt; 해결 방법 &gt;</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>          left 의 right(LR) or  &lt;--1.rotate_left 2.rotate_right
          right 의 left(RL)     &lt;--1.rotate_right 2.rotate_left
          의 height 가 불균형난 경우
          1.rotate\_left 2, rotate\_right
</code></pre></div>    </div>
  </li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
class Node:
    def __init__(self, key, value, height, left=None, right=None):
        self.key = key
        self.value = value
        self.height = height
        self.left = left
        self.right = right


class AVL:
    def __init__(self):
        self.root = None

    def height(self, n):
        if n == None:
            return 0
        return n.height

    def rotate_right(self, n):
        x = n.left
        n.left = x.right
        x.right = n
        n.height = max(self.height(n.left), self.height(n.right)) + 1
        x.height = max(self.height(x.left), self.height(x.right)) + 1
        return x

    def rotate_left(self, n):
        x = n.right
        n.right = x.left
        x.left = n
        n.height = max(self.height(n.left), self.height(n.right)) + 1
        x.height = max(self.height(x.left), self.height(x.right)) + 1


    def bf(self, n):
        return self.height(n.left) - self.height(n.right)

    def balance(self, n):
        # LL, LR : self.bf(x) &gt; 1
        # RR, RL : self.bf(x) &lt; -1
        # &gt; 1 , (&lt; 0 True) 이라면 LR( 1.rotate_left() -&gt; 2.rotate_right() )
        # &gt; 1, (&lt;0 False) 라면 LL(rotate_right() )
        # 이해안가면 책에 필기해놓은거 있으니 보자         
        # self.bf &gt; 1: 왼쪽 불균형났다(left &gt; right), -1 은 반대
        if self.bf(n) &gt; 1: # * rotate_right(n) 필요
            if self.bf(n.left) &lt; 0: # 1이 아니라 0인 이유: 어느쪽 불균형인지 판별위해서
                n.left = self.rotate_left(n.right) # LR rotation 실행
            n = self.rotate_right(n) # * rotate_right(n) 실행
        elif self.bf(n) &lt; -1:
            if self.bf(n.right) &gt; 0:
                n.right = self.rotate_right(n.right)
            n = self.rotate_left(n)
        return n

    def put(self, key, value):
        self.root = self.put_item(self.root, key, value)

    def put_item(self, n, key, value):
        if n == None:
            return Node(key, value, 1)

        if n.key &gt; key:
            n.left = self.put_item(n.left, key, value)
        elif n.key &lt; key:
            n.right = self.put_item(n.right, key, value)
        else:
            n.value = value
            return n
        n.height = max(self.height(n.left), self.height(n.right)) + 1
        return self.balance(n)
</code></pre></div></div>

  </div>

  <!-- To enable Disqus comments, comment out this code and insert your Disqus shortname -->

  <!--  -->

</article>

    </div>
</div>

      
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-2.x-git.min.js"></script>
      
    <!-- Bootstrap Core JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="/js/index.js"></script>

  </body>

    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

    <script>
    $(document).ready(function(){
    $('#page-content-wrapper').fadeIn();
    });
    </script>

</html>
