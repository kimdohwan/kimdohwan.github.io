<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>3. Tree - Bynary Heap</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/style.css">
  <link rel="canonical" href="http://localhost:4000/datastructure/2018/11/19/binary_heap.html">
  <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="http://localhost:4000/feed.xml">

  	<!-- 폰트 및 코드 하이라이팅 -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/androidstudio.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
</head>


  <body>

    <div class='wrapper'>

    <!--<input data-function='swipe' id='swipe' type='checkbox'>-->
    <!--<label data-function='swipe' for='swipe' class="btn btn-default" >Menu</label>-->


    <!--<div class='sidebar menu'>-->
    <div id="test">


        <div class="menu">

            <div class="navigation">
                <ul>
                    

                    
                    
                    
                    
                    <li><a href="/">Home</a></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>


            <hr>

            <div class="navigation">
                <ul>
                    
                    <li>
                        <a href="/categories/Python">Python</a></li>
                    
                    <li>
                        <a href="/categories/Etc">Etc</a></li>
                    
                    <li>
                        <a href="/categories/CodingTest">CodingTest</a></li>
                    
                    <li>
                        <a href="/categories/AWS">AWS</a></li>
                    
                    <li>
                        <a href="/categories/Django">Django</a></li>
                    
                    <li>
                        <a href="/categories/DataStructure">DataStructure</a></li>
                    
                </ul>
            </div>

            <hr>

            <!--<div id="picture" style="background-image: url(http://www.naturaloil.ph/wp-content/uploads/2015/11/John_Doe.jpg)"></div>-->
            <p>One sentence introducing yourself or what you do</p>

            <hr>


            <div id="social-icons">
                <ul>
                    <!--<li><a href="http://facebook.com/username"><i class="fa fa-facebook"></i></a></li>-->
                    <!--<li><a href="https://mx.linkedin.com/in/username"><i class="fa fa-linkedin"></i></a></li>-->
                    <li><a href="http://github.com/username"><i class="fa fa-github"></i></a></li>
                    <!--<li><a href="http://username.deviantart.com"><i class="fa fa-deviantart"></i></a></li>-->
                    <!--<li><a href="http://codepen.io/username"><i class="fa fa-codepen"></i></a></li>-->
                </ul>
            </div>

            <hr>

            <!--<p>© Taken theme<p>-->
            <!--<p>Powered by Jekyll<p>-->

        </div>
    </div>

    <div class='content'>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
     <h2 class="post-title">3. Tree - Bynary Heap</h2>
     <p class="post-meta"><time datetime="2018-11-19T00:00:00+09:00" itemprop="datePublished">Nov 19, 2018</time></p>
      <hr>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class BHeap:
    def __init__(self, a):
        self.a = a
        self.N = len(a) - 1 # a[0] = None, it needs '-1'

    def create_heap(self):
        for i in range(self.N // 2, 0, -1):
            print(i, 'downheap 실행')
            self.downheap(i) # downheap(), 인자로 i 전달(i부터 내려가거라)
# 첫 self.n//2 는 최하단에서 두번째 층의 마지막 노드를 의미
# (7개의 node가 있다면 
# level 1 = 최상위노드 1개  &lt;--두번째(i=1) self.n//2 노드
# level 2 = level 1에서 뻗어나온 2개  &lt;--첫번째(i=2)로 self.n//2 노드 시작
# level 3 = level 2에서 뻗어나온 4개)

    def insert(self, key_value):
        self.N += 1
        print('append 전 tree:', a)
        self.a.append(key_value) # a 의 뒷 쪽에 key_value 삽입
        print('append 후 tree:', a, self.N)
        self.upheap(self.N) # upheap(), 인자로 self.N 을 전달(n부터 올라가거라)

    def delete_min(self):
        if self.N == 0:
            print('self.N == 0')
            return None
        minimum = self.a[1]
        self.a[1], self.a[-1] = self.a[-1], self.a[1]

        del self.a[-1]
        self.N -= 1
        self.downheap(1) # downheap(), 인자로 1 전달(1부터 내려가거라)
        return minimum

    # i부터 올라가거라(값 비교 후 교체 한 후 올라가며 진행)
    def downheap(self, i): 
        while 2 * i &lt;= self.N:
            k = 2 * i # k 는 i 의 child node 를 의미(2를 곱한 위치,인덱스)
            if k &lt; self.N and self.a[k][0] &gt; self.a[k + 1][0]:
                k += 1
                print('k + 1', k)
            if self.a[i][0] &lt; self.a[k][0]:
                print('break')
                break
            self.a[i], self.a[k] = self.a[k], self.a[i]
            i = k
            print('i = k', k)

    def upheap(self, j):
        while j &gt; 1 and self.a[j // 2][0] &gt; self.a[j][0]:
            print('j:', j, self.a[j // 2][0], self.a[j][0])
            self.a[j], self.a[j // 2] = self.a[j // 2], self.a[j]
            j = j // 2
            print(a, '\n')

    def print_heap(self):
        for i in range(1, self.N + 1):
            print('[%2d' % self.a[i][0], self.a[i][1], ']', end='')
        print(self.N)



# 책에있는 코드(위)에서 heap item 을 [90, apple] 과 같은 방식이 아닌
# 숫자만(90) 넣은 코드로 다시 작성해보았다 
class Binary_Heap:
    def __init__(self, item):
        self.heap_array = item
        self.item_num = len(item) - 1

    def create_heap(self):
        for i in range(self.item_num // 2, 0 , -1):
            self.downheap(i)

    def delete_min(self):
        self.item_num -= 1
        deleted_min = self.heap_array[1]
        self.heap_array[1], self.heap_array[-1] = self.heap_array[-1], self.heap_array[1]
        del self.heap_array[-1]
        self.downheap(1)
        return deleted_min

    def downheap(self, i):
        while 2 * i &lt;= self.item_num:
            k = 2 * i
            if k &lt; self.item_num and self.heap_array[k] &gt; self.heap_array[k + 1]:
                print(f'downheap if \n {k} &lt; {self.item_num} and {self.heap_array[k]} &gt; {self.heap_array[k+1]}')
                k += 1
            if self.heap_array[i] &lt; self.heap_array[k]:
                print(f'downheap if(break) {self.heap_array[i]} &lt; {self.heap_array[k]}')
                break
            self.heap_array[i], self.heap_array[k] = self.heap_array[k], self.heap_array[i]
            i = k

    def print_heap(self):
        print(self.heap_array[1:]) # heap 만 (앞 None 제외)

    def insert(self, value): # 새로운 트리 item 추가
        self.item_num += 1 # 1. item 갯수를 추가시켜주고
        self.heap_array.append(value) # 2. item 을 append 해주고
        self.upheap(self.item_num) # upheap 을 이용해서 트리 재편

    def upheap(self, heap_num):
        while heap_num &gt; 1 and self.heap_array[heap_num // 2] &gt; self.heap_array[heap_num]:
            self.print_heap()
            print(f'upheap while loop \n{self.heap_array[heap_num // 2]} &gt; {self.heap_array[heap_num]}')
            self.heap_array[heap_num // 2], self.heap_array[heap_num] = self.heap_array[heap_num], self.heap_array[heap_num // 2]
            heap_num = heap_num // 2
</code></pre></div></div>

  </div>

  <!-- To enable Disqus comments, comment out this code and insert your Disqus shortname -->

  <!--  -->

</article>

    </div>
</div>

      
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-2.x-git.min.js"></script>
      
    <!-- Bootstrap Core JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="/js/index.js"></script>

  </body>

    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

    <script>
    $(document).ready(function(){
    $('#page-content-wrapper').fadeIn();
    });
    </script>

</html>
