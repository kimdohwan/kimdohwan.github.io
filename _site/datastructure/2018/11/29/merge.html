<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>6. Sort - Merge</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Condensed:300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/style.css">
  <link rel="canonical" href="http://localhost:4000/datastructure/2018/11/29/merge.html">
  <link rel="alternate" type="application/rss+xml" title="Your awesome title" href="http://localhost:4000/feed.xml">

  	<!-- 폰트 및 코드 하이라이팅 -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/androidstudio.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
</head>


  <body>

    <div class='wrapper'>

    <!--<input data-function='swipe' id='swipe' type='checkbox'>-->
    <!--<label data-function='swipe' for='swipe' class="btn btn-default" >Menu</label>-->


    <!--<div class='sidebar menu'>-->
    <div id="test">


        <div class="menu">

            <div class="navigation">
                <ul>
                    

                    
                    
                    
                    
                    <li><a href="/">Home</a></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>


            <hr>

            <div class="navigation">
                <ul>
                    
                    <li>
                        <a href="/categories/Python">Python</a></li>
                    
                    <li>
                        <a href="/categories/Etc">Etc</a></li>
                    
                    <li>
                        <a href="/categories/CodingTest">CodingTest</a></li>
                    
                    <li>
                        <a href="/categories/AWS">AWS</a></li>
                    
                    <li>
                        <a href="/categories/Django">Django</a></li>
                    
                    <li>
                        <a href="/categories/DataStructure">DataStructure</a></li>
                    
                </ul>
            </div>

            <hr>

            <!--<div id="picture" style="background-image: url(http://www.naturaloil.ph/wp-content/uploads/2015/11/John_Doe.jpg)"></div>-->
            <p>One sentence introducing yourself or what you do</p>

            <hr>


            <div id="social-icons">
                <ul>
                    <!--<li><a href="http://facebook.com/username"><i class="fa fa-facebook"></i></a></li>-->
                    <!--<li><a href="https://mx.linkedin.com/in/username"><i class="fa fa-linkedin"></i></a></li>-->
                    <li><a href="http://github.com/username"><i class="fa fa-github"></i></a></li>
                    <!--<li><a href="http://username.deviantart.com"><i class="fa fa-deviantart"></i></a></li>-->
                    <!--<li><a href="http://codepen.io/username"><i class="fa fa-codepen"></i></a></li>-->
                </ul>
            </div>

            <hr>

            <!--<p>© Taken theme<p>-->
            <!--<p>Powered by Jekyll<p>-->

        </div>
    </div>

    <div class='content'>
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
     <h2 class="post-title">6. Sort - Merge</h2>
     <p class="post-meta"><time datetime="2018-11-29T00:00:00+09:00" itemprop="datePublished">Nov 29, 2018</time></p>
      <hr>
  </header>

  <div class="post-content" itemprop="articleBody">
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
</span><span class="kn">import</span> <span class="nn">random</span>


<span class="k">def</span> <span class="nf">merge_sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
    <span class="c1"># debug mode 에서 list item 확인을 위해 추가한 변수
</span>    <span class="n">current_list</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">low</span><span class="p">:</span> <span class="n">high</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

    <span class="c1"># 보통 logN 의 복잡도를 가지는 정렬의 경우,
</span>    <span class="c1"># list 를 앞, 뒤 2개로 쪼개가며 call stack 의 가장 윗단에서는
</span>    <span class="c1"># list item 이 1개만 남을 때까지 2개로 쪼개는 함수가 실행된다.
</span>    <span class="c1"># 쪼개고 쪼개다 보면 결국 item 이 1개가 될 때가 온다
</span>    <span class="c1"># 함수의 list item 이 1개라는 의미는,
</span>    <span class="c1"># caller(stack 의 한단계 밑 함수)함수의 list item 은 2개라는 것을 뜻한다.
</span>    <span class="c1"># 보통 2개로 쪼개는 정렬 함수의 경우,
</span>    <span class="c1"># 2개의 재귀 함수(앞, 뒤를 담당하는)가 실행되는데
</span>    <span class="c1"># 이 때 앞, 뒤를 담당하는 함수 모두 list item 이 1개 되면 return 을 한다.
</span>    <span class="c1"># 앞,뒤 함수가 모두 return 된 상태에서 크기비교 연산(값 변경, 할당)을 실행한다.
</span>    <span class="c1"># 2개, 2개로 나뉘어진 list item 들이 각각 정렬된 후에,
</span>    <span class="c1"># 총 4개의 list item 을 재배치(정렬)하게 된다
</span>    <span class="c1"># quick sort 의 경우,
</span>    <span class="c1"># 크기비교 연산(값 변경, 할당)에서 이뤄지는 과정이 약간 다르지만
</span>    <span class="c1"># 2개로 쪼개지며 재귀적으로 함수를 호출하는 방식은 매우 유사하다.
</span>    <span class="k">if</span> <span class="n">high</span> <span class="o">&lt;=</span> <span class="n">low</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span><span class="s">'{current_list}'</span>  <span class="c1"># return 만 적는 것이 맞음(debug 때 보려고 문자열 추가)
</span>    <span class="n">mid</span> <span class="o">=</span> <span class="n">low</span> <span class="o">+</span> <span class="p">(</span><span class="n">high</span> <span class="o">-</span> <span class="n">low</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

    <span class="c1"># 처음에는 2개의 list item 을 가지고 들어간다.
</span>    <span class="c1"># 실행 된 후에는 a[0], a[1] 이 정렬 완료
</span>    <span class="n">merge_sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">)</span>

    <span class="c1"># 처음에는 2개의 list item 을 가지고 들어간다.
</span>    <span class="c1"># 실행 된 후에는 a[2], a[3] 이 정렬 완료
</span>    <span class="n">merge_sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>

    <span class="c1"># 위 두 함수가 실행된 후 2개씩 쪼개져 정렬된(a[0], a[1] / a[2], a[3])
</span>    <span class="c1"># 총 4개이 list item 을 정렬시킨다
</span>    <span class="n">merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">high</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">low</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">high</span><span class="p">):</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">low</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">mid</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>

        <span class="c1"># 2개/2개로 쪼개진 item 들의 첫번째 item 크기 비교?
</span>        <span class="c1"># 아니다. item 이 아닌 index 크기비교다. 왜?
</span>        <span class="c1"># 알아냈다
</span>        <span class="c1"># for loop 가 실행됫을 때(k=0)부터 최소 절반까지(mid 값)까지는
</span>        <span class="c1"># 3,4 번째 if 문'만' 실행된다.
</span>        <span class="c1"># 왜냐하면 그 전까지는 i, j 가 mid, high 값을 초과할 수 없기 때문이다.
</span>        <span class="c1"># i, j 가 mid,high 를 초과한다는 의미는
</span>        <span class="c1"># 반으로 쪼갠 각각의 list index 를 넘어섰다는 것인데
</span>        <span class="c1"># 이 때 넘어선 값은 mid or high 값이 되겠다.
</span>        <span class="c1"># i 값이 mid 를 초과했다면, i 부터 mid 까지의 값들은 list b 에 할당되어있다(정렬 완료되었다)
</span>        <span class="c1"># j 값이 hight 를 초과했다면 j 부터 high 까지의 값들은 list b 에 할당되어있다(정렬 완료되었다)
</span>        <span class="c1"># 그러므로 아직 할당되지 않은(mid or high를 초과하지 않은) 값을
</span>        <span class="c1"># list b 에 할당(정렬)하고 index 를 증가시켜(+1) 다음 값 할당을 진행한다.
</span>        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">mid</span><span class="p">:</span>
            <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">j</span> <span class="o">&gt;</span> <span class="n">high</span><span class="p">:</span>
            <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># list item 값들을 비교한다.
</span>        <span class="c1"># i, j +1 하는 이유:
</span>        <span class="c1">#   b 에 a[x] 를 넣게 된다면, x 에 해당하는 값은 정렬이 완료됫음을 의미
</span>        <span class="c1">#   따라서 그 다음 값을 정렬연산해주어야 한다. +1 해줘서 index 를 바꿔준다
</span>        <span class="c1">#   else 의 경우는 같은 값을 비교할 경우도 포함된다(ex: a[i] == a[j])
</span>        <span class="k">elif</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># # ---------------------- 내가 바꿔본 코드(속도 더 느림ㅠㅠ)-------------
</span>    <span class="c1">#     k = low
</span>    <span class="c1">#     while i &lt;= mid and j &lt;= high:
</span>    <span class="c1">#         if a[i] &gt; a[j]:
</span>    <span class="c1">#             b[k] = a[j]
</span>    <span class="c1">#             j += 1
</span>    <span class="c1">#         else:
</span>    <span class="c1">#             b[k] = a[i]
</span>    <span class="c1">#             i += 1
</span>    <span class="c1">#         k += 1
</span>    <span class="c1">#
</span>    <span class="c1">#     while i &lt; mid + 1 or j &lt; high + 1:
</span>    <span class="c1">#         if i &gt; mid:
</span>    <span class="c1">#             b[k] = a[j]
</span>    <span class="c1">#             j += 1
</span>    <span class="c1">#         elif j &gt; high:
</span>    <span class="c1">#             b[k] = a[i]
</span>    <span class="c1">#             i += 1
</span>    <span class="c1">#         k += 1
</span>    <span class="c1">#
</span>    <span class="c1"># # -------------------------------------------------------------
</span>
    <span class="c1"># 정렬된 list b 의 item 을 a로 복사해준다.
</span>    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">a</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
    <span class="c1"># a = [39, 6, 33, 18]
</span>    <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="bp">None</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">merge_sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div></div>

  </div>

  <!-- To enable Disqus comments, comment out this code and insert your Disqus shortname -->

  <!--  -->

</article>

    </div>
</div>

      
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-2.x-git.min.js"></script>
      
    <!-- Bootstrap Core JavaScript -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script src="/js/index.js"></script>

  </body>

    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

    <script>
    $(document).ready(function(){
    $('#page-content-wrapper').fadeIn();
    });
    </script>

</html>
